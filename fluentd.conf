<source>
  type systemd
  pos_file /var/log/systemd.pos
  tag systemd
  strip_underscores true
</source>

# Do not directly collect fluentd's own logs to avoid infinite loops.
<match fluent.**>
  type null
</match>

<match **>
  type elasticsearch
  logstash_format true
  include_tag_key true
  tag_key "@log_name"
  log_level info

  flush_interval 5s
  buffer_chunk_limit 2M
  # Cap buffer memory usage to 2MiB/chunk * 32 chunks = 64 MiB
  buffer_queue_limit 32
  max_retry_wait 30

  hosts ##HOSTS##

</match>
